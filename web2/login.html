<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="gamerbuddy, gameboosting, gamerhub" />
        <title>GamerHub</title>
        <link rel="stylesheet" href="design_login.css">
        <link rel="icon" type="image/x-icon" href="./image/favicon.png">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    </head>

    <body>

        
         <nav class="navbar">
            <div><a href="index.html"><img src="./image/logo.png" alt="LOGO" class="logo"/></a></div>
            <button class=button id="signup"><a href="#">Sign Up</a></button>
            <button class=button id="login"><a href="#">Login</a></button>
            <button class=button id="logout" style="display: none;"><a href="#">Logout</a></button>
            <input type="checkbox" id="menu-bar"\>
            <label for="menu-bar">&#9776;</label>
            <ul class="list"> 
             <li><a href="index.html">Home</a></li>  
             <li>
                <a href="#">Services &#x25BC;</a>
             <ul class="dropdown">
                <li><a href="">Game Buddy</a></li>
                <li><a href="">Game Boosting</a></li>
            </li>
             </ul>
             <li><a href="index.html">About Us</a></li>                   
            </ul>

        </nav>


        
        <div class="register">
            <h1 id="title">Login</h1>
            <form action=" " method="post" id="slform">
                <div class="input-group"> 
                    <div class="input-field" id="username">
                        <i class="fa-solid fa-user"></i>
                       <input idtype="text" placeholder="Username"minlength="6" maxlength="20" id="userplaceholder" >
                    </div>
                    <div class="input-field">
                        <i class="fa-solid fa-envelope"></i>
                        <input type="email" placeholder="Email" id="emailplaceholder" required>
                    </div>

                    <div class="input-field">
                        <i class="fa-solid fa-user-lock"></i>
                        <input type="password" placeholder="Password"minlength="6" maxlength="20" id="passplaceholder" required>
                    </div>
                <a id="forgetpass" href="#"><p>Forgot password?</p></a>
                </div>
                <div class="button-field">
                   <a href="#"><input type="submit" id="signup2" value="Sign Up"></a> 
                    <a href="#"><input type="submit" id="login2" value="Login" ></a>

                </div>
            </form>
        </div>

<script>
let signup = document.getElementById("signup");
let login = document.getElementById("login");
let username = document.getElementById("username");
let title = document.getElementById("title");
let forgetpass = document.getElementById("forgetpass");
let userplaceholder =document.getElementById("userplaceholder");
let emailplaceholder =document.getElementById("emailplaceholder");
let passplaceholder =document.getElementById("passplaceholder");

login.onclick = function(){
    username.style.maxHeight ="0px";
    title.innerHTML ="Login";
    forgetpass.style.visibility ="visible";
    signup2.style.display ="none";
    login2.style.display="block";
    userplaceholder.removeAttribute('required');
    userplaceholder.value = "";
    passplaceholder.value = "";
    emailplaceholder.value = "";
}

signup.onclick = function(){
    username.style.maxHeight ="60px";
    title.innerHTML ="Sign Up";
    forgetpass.style.visibility ="hidden";
    signup2.style.display ="block";
    login2.style.display="none";
    userplaceholder.setAttribute('required', '');
    userplaceholder.value = "";
    passplaceholder.value = "";
    emailplaceholder.value = "";
}


</script>
</body>

<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-analytics.js";
  import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-auth.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyC8PbsVpFckIu2qi-wrEo6f8zg7_UmtkjI",
    authDomain: "gamerhub-2180b.firebaseapp.com",
    databaseURL: "https://gamerhub-2180b-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "gamerhub-2180b",
    storageBucket: "gamerhub-2180b.appspot.com",
    messagingSenderId: "891625973763",
    appId: "1:891625973763:web:061747ce41e576d9a70636",
    measurementId: "G-LZLNDMLVQR"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  //initialize variable
    const auth = getAuth();

     
    //----- New Registration code start	  
	  document.getElementById("signup2").addEventListener("click", function() {
        var userplaceholder =  document.getElementById("userplaceholder").value;
		  var emailplaceholder =  document.getElementById("emailplaceholder").value;
		  var passplaceholder = document.getElementById("passplaceholder").value;
		  //For new registration
		  createUserWithEmailAndPassword(auth, email, password)
		  .then((userCredential) => {
		    // Signed in 
		    const user = userCredential.user;
		    console.log(user);
		    alert("Registration successfully!!");
		    // ...
		  })
		  .catch((error) => {
		    const errorCode = error.code;
		    const errorMessage = error.message;
		    // ..
		    console.log(errorMessage);
		    alert(error);
		  });		  		  
	  });
	  //----- End

	  //----- Login code start	  
	  document.getElementById("login2").addEventListener("click", function() {
		  var email =  document.getElementById("emailplaceholder").value;
		  var password = document.getElementById("passplaceholder").value;

		  signInWithEmailAndPassword(auth, email, password)
		  .then((userCredential) => {
		    // Signed in 
		    const user = userCredential.user;
		    console.log(user);
		    alert(user.email+" Login successfully!!!");
		    document.getElementById('logout').style.display = 'block';
		    // ...
		  })
		  .catch((error) => {
		    const errorCode = error.code;
		    const errorMessage = error.message;
		    console.log(errorMessage);
		    alert(errorMessage);
		  });		  		  
	  });
	  //----- End

	  //----- Logout code start	  
	  document.getElementById("logout").addEventListener("click", function() {
		  signOut(auth).then(() => {
			  // Sign-out successful.
			  console.log('Sign-out successful.');
			  alert('Sign-out successful.');
			  document.getElementById('logout').style.display = 'none';
			}).catch((error) => {
			  // An error happened.
			  console.log('An error happened.');
			});		  		  
	  });
	  //----- End

	</script>
</html>